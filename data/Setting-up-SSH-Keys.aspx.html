<p>SSH (Secure SHell), is one of the many ways in which you can access Milton. Typically, ssh'ing to a server requires a username, hostname (e.g., slurm-login or vc7-shared), and a password to login. However, often this can be a bit cumbersome to remember all the names or to enter your password each time. The ssh config file and setting up ssh keys can reduce the effort. SSH keys also have the added benefit of improving security.</p><h3><span class="fontColorThemeSecondary">Creating SSH Keys</span></h3><p>SSH keys improve security by using a randomized hash to log into a server. Keys work by creating a "private" SSH key and a corresponding "public" SSH key. The public key is stored on the server(s) you would like to get access to, and the private key is kept on the computer that you wish to access the server from (e.g., your WEHI laptop).</p><p>To create a new key pair, you execute the following command on your computer:</p><pre>$ ssh-keygen</pre><p>You will then be given a prompt with which you can use to choose the location and/or name of the key pair. The default is "~/.ssh/id_rsa".</p><pre>Enter file in which to save the key (/home/user/.ssh/id_rsa): ~/somewhere/else/key</pre><p>which creates the "key" and "key.pub" files in ~/somewhere/else. You will then be prompted to create a passphrase for the private key. You can choose to have no passphrase (press enter without typing anything), but we highly recommend using a passphrase. This prevents anybody else from being able to use the key even if they have access to the file itself.</p><p>Once you've entered your passphrase, both the private and public keys should have been created!</p><h3><span class="fontColorThemeSecondary">Distributing the Public Key</span></h3><p>The next step is to get the public key onto the server you want to connect to. To do this, execute the command:</p><pre>$ ssh-copy-id -i ~/somewhere/else/key.pub username@server.com.au</pre><p>This will attempt to copy the public key we just created (as denoted by the .pub extension), to the home directory of "username" on the "server.com.au" server. If you're on a WEHI machine, your command will look like</p><pre>ssh-copy-id -i/somewhere/else/key.pub lastname.i@slurm-login</pre><p>where slurm-login is the name of the milton login nodes and you would replace lastname.i with your own username. This adds the public key to the "~/.ssh/authorized_keys" file on the server. Note that Milton home directories are shared on all nodes/VMs, so you only have to do this step once for machines on Milton.</p><p>You can now try ssh'ing to Milton! You have to pass the -i &lt;private key&gt; option like so:</p><pre>$ ssh -i ~/somewhere/else/key slurm-login\nEnter passphrase for /home/user/somewhere/else/key: \n</pre><p>and you enter your passphrase set earlier. Note that you can distribute your public key to any number of servers as you need. Another place where you're likely to use the key is on <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/about-ssh" data-cke-saved-href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/about-ssh" data-interception="on" title="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/about-ssh">Github</a>!</p><h3><span class="fontColorThemeSecondary">Saving Your Keys to the SSH Agent</span></h3><p>You would've noticed that if you've saved your key in somewhere other than the default location, you will have to use the -i &lt;private-key&gt; option every time you ssh to another server. Furthermore, you had to enter your passphrase every time. Not very convenient!</p><p>The SSH agent is one way to make things easier. To add the key to the agent (if it's running), you use the command</p><pre>$ ssh-add ~/somewhere/else/key\n</pre><p>which will then prompt you for your passphrase. Once the key has been added, you won't need to enter in your passphrase again until you restart the agent (like if the computer is turned off and then back on). If you run the ssh-add command and you get the error</p><pre>Could not open a connection to your authentication agent.</pre><p>then you need start the agent with the command</p><pre>$ eval $(ssh-agent)\n</pre><p>which allows you to add your private key to the agent with ssh-add.</p><p>If needed, you can setup the ssh agent to start in terminal sessions by adding the above eval command to your .bashrc.</p><h3><span class="fontColorThemeSecondary">Configuring SSH</span></h3><p>You can configure SSH to make things a little convenient. A common configuration is to give "nicknames" to servers to make it easier to ssh to. This configuration can be saved in the ~/.ssh/config file. In that file, we can put</p><pre>Host msl\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HostName slurm-login\n</pre><p>which will mean I can "ssh msl" instead of "ssh slurm-login" to get to Milton's slurm-login node. If you're accessing a server with a different username, you can also add the "User &lt;username" field to tell SSH which user you would like to authenticate as. For example, let's say I wish to connect to a Nectar Virtual Machine, the command I might use to connect is</p><pre>ssh ubuntu@<span>203.101.230.200</span></pre><p><span>but with the following config:</span></p><pre><span>Host nvm\n    HostName 201.101.230.200</span>\n    User ubuntu\n</pre><p>allows me to connect with the command</p><pre>ssh nvm\n</pre><h3><span class="fontColorThemeSecondary">Further Reading</span></h3><p>The SSH protocol is key to enabling secure connectivity between computers. See below links to learn more:</p><ul><li><a href="https://www.ssh.com/academy/ssh" data-cke-saved-href="https://www.ssh.com/academy/ssh" data-interception="on" title="https://www.ssh.com/academy/ssh"><strong>Official SSH learning material</strong></a></li><li><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh" data-cke-saved-href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh" data-interception="on" title="https://docs.github.com/en/authentication/connecting-to-github-with-ssh"><strong>Setting up SSH keys on Github</strong></a></li></ul>
