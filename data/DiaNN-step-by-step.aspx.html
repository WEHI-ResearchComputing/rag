<h2>DiaNN&nbsp;step-by-step</h2><p>This step-by-step tutorial details how to set your job up and then run it on SLURM. This has&nbsp;the following advantages over running on the VM:<br><br></p><ul><li>More CPU cores and memory available through<strong> </strong><a href="/sites/rc2/SitePages/Batch-jobs.aspx" data-cke-saved-href="https://wehieduau.sharepoint.com/sites/rc2/SitePages/Batch-jobs.aspx" data-interception="on" title="https://wehieduau.sharepoint.com/sites/rc2/SitePages/Batch-jobs.aspx">SLURM</a>​​​​​​​</li><li><strong>​​​​​​​</strong>Using SLURM, you can copy your data to <a href="/sites/rc2/SitePages/high-performance-storage.aspx" data-cke-saved-href="https://wehieduau.sharepoint.com/sites/rc2/SitePages/high-performance-storage.aspx" data-interception="on" title="https://wehieduau.sharepoint.com/sites/rc2/SitePages/high-performance-storage.aspx">VAST</a> and get faster I/O performance.</li></ul>
<h3><span class="fontColorBlue">Step 1: Prepare your data</span></h3><p>You must know where your data is stored.&nbsp;Most proteomics data is stored&nbsp;in:</p><pre style="margin-left:40px;"><span class="fontColorBlue">S:\\data\\Projects\\ProteomicsLab\\DATA</span></pre><p>on the MSCypher VM which maps to:</p><pre style="margin-left:40px;"><span class="fontColorBlue">/stornext/Sysbio/data/Projects/ProteomicsLab/DATA</span></pre><p>Ensure that your project directory contains:</p><ul><li>All input data (".d", ".raw")</li><li>Reference fasta file (".fasta")</li><li>(Optional) In case you need a library-based analysis: Library file (".tsv")</li></ul>
<p><strong><span class="fontColorRed">Note</span></strong> that the project directory should only have DiaNN related files.</p><p>Any files from an old run may conflict with the new run and cause <span class="fontColorBlue"><strong>errors.</strong></span></p>
<h3><span class="fontColorBlue">Step 2: Move your project data to VAST (Optional)</span></h3><p>It is recommended that you request a <a href="/sites/rc2/SitePages/high-performance-storage.aspx" data-cke-saved-href="https://wehieduau.sharepoint.com/sites/rc2/SitePages/high-performance-storage.aspx" data-interception="on" title="https://wehieduau.sharepoint.com/sites/rc2/SitePages/high-performance-storage.aspx">VAST scratch</a> space where you can run your jobs and then move the results back to your shared location on Sysbio. Running on VAST can accelerate your job runs, especially with repeated read/write operations.</p><p>To request a VAST scratch space, login to <a href="https://ondemand.hpc.wehi.edu.au/" data-cke-saved-href="https://ondemand.hpc.wehi.edu.au/" target="_blank" data-interception="off" title="https://ondemand.hpc.wehi.edu.au/">Open Ondemand</a><strong>. </strong>Using the <em>Files</em> menu, as shown below, navigate to your Home Directory:</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="9" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="e222d332-e476-44a8-a867-85a79a822d24" title=""></div></div><p>In this example, we assume that the project we are interested in is stored here:</p><pre style="margin-left:40px;"><span class="fontColorBlue">/stornext/HPCScratch/home/romano.h/ProteomicsLab/DATA/P4024</span></pre><p>So, we use <em>Change Directory</em> (as shown below) to go to where the directory is:</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="8" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="40473573-3d69-4f68-924b-340a8640eb8f" title=""></div></div><p>We can copy files between directories through the <span class="fontColorBlue"><em>Copy/Move</em> <span class="fontColorNeutralDark">button,</span></span> but this is not recommended for big directories, so this is how to move through the terminal:</p><p>Use the <span class="fontColorBlue"><em>Open in Terminal</em> <span class="fontColorNeutralDark">button</span></span><strong><span class="fontColorBlue">&nbsp;</span></strong>to open a terminal in another tab of your browser.</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="7" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="64680d0a-0904-4a7e-94a2-99b6a816ad72" title=""></div></div><p>You will&nbsp;be asked for your WEHI&nbsp;password. Don't worry if nothing appears as you enter your password as this is how Linux deals with passwords.</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="6" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="e6783eff-77c6-483b-bd02-1057cb352d8f" title=""></div></div><p>Then run the two commands&nbsp;below and wait until the command finishes. This may take a few seconds, minutes, or hours depending on the amount of data moved.&nbsp;</p><pre style="margin-left:40px;"><span class="fontColorBlue">cd ../ \ncp -R P4024 /vast/scratch/users/$USER/</span></pre><p><br></p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="5" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="0ee21170-ecda-47ec-96f8-0abb37584553" title=""></div></div><p>The image above shows an example where I move the project to my VAST scratch directory. Replace username <em>romano.h&nbsp;</em>with yours when running, or any alternative path you want to move to. Then continue to <em>Step 3</em>, using the path you saved the data to.</p>
<h3><span class="fontColorBlue">Step 3: Start a job on SLURM</span></h3><p>Using the <em>Change Directory</em> button (as shown above), go to your project directory (whether on VAST/Stornext) and then click on the "<em>Open in Terminal</em>" button</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="1" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="a6725588-d450-46bc-8426-a7413a09e248" title=""></div></div><p><br></p><p>Now, depending on your specific situation, follow any of the following examples:</p><ul><li><strong>Step 3-A:</strong> Library based analysis</li><li><strong>Step 3-B:</strong> Free-library based analysis</li></ul>
<h3><span class="fontColorBlue">Step 3-A: Start a library based job on SLURM</span></h3><p>After the terminal is open, run the two commands below and wait until the command finishes. This may take a few seconds.</p><pre>​​​​​​​$ DIANN_RUN_TYPE="lib" DIANN_LIB=library.tsv /stornext/System/data/apps/rc-tools/rc-tools-1.0/bin/tools/DiaNN/createdianncmd.sh</pre><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="5" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="eba4592f-d71b-4dbc-96bb-93d13332d7ba" title=""></div></div><p>After the command finishes, a new file called <strong><em>"diann.slurm"</em></strong> will be created in your project:</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="4" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="a75dc236-57b0-455c-9f0e-571c03cb08e1" title=""></div></div><p>If you need to customize any parameter according to your specific analysis, you can always edit the "<strong><em>diann.slurm"</em></strong> file.&nbsp;&nbsp; For this, click the three-dot dropdown icon next to it and select <em>edit</em>.</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="3" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="99ab85ca-c1c7-4dbd-8a52-5d44d746bdb7" title=""></div></div><p>Then you will be able to edit and save the file.</p>
<h3><span class="fontColorBlue">Step 3-B: Start a free-library based job on SLURM</span></h3><p>After the terminal is open, run the two commands below and wait until the command finishes. This may take a few seconds.</p><pre>​​​​​​​$ DIANN_RUN_TYPE="libfree" /stornext/System/data/apps/rc-tools/rc-tools-1.0/bin/tools/DiaNN/createdianncmd.sh</pre><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="5" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="39c39471-36c6-4512-a04a-a0f5cea59a46" title=""></div></div><p>After the command finishes, a new file called <strong><em>"diann.slurm"</em></strong> will be created in your project:</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="4" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="fb4d50f7-aacd-4389-b5ac-bc45ebb3ef2e" title=""></div></div><p>If you need to customize any parameter according to your specific analysis, you can always edit the "<strong><em>diann.slurm"</em></strong> file. For this, click the three-dot dropdown icon next to it and select <em>edit</em>.</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="3" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="ccc84822-4be9-47be-abe3-8c1727355c28" title=""></div></div><p>Then you will be able to edit and save the file:&nbsp;</p>
<pre>#!/bin/bash\n&nbsp;&nbsp;\n#SBATCH -p regular\n#SBATCH --job-name=<span class="highlightColorAqua">DiaNN_lib</span>\n#SBATCH --time=<span class="highlightColorAqua">48:00:00</span>\n#SBATCH --cpus-per-task=<span class="highlightColorAqua">10</span>\n#SBATCH --mem-per-cpu=<span class="highlightColorAqua">5G</span>\n\nmodule use /stornext/System/data/modulefiles/sysbio\nmodule load DiaNN/1.8\n\nmkdir output\n\ndiann-1.8 \\\n&nbsp; &nbsp; &nbsp; --f "/stornext/HPCScratch/home/romano.h/ProteomicsLab/DATA/P4024/P4025_15min_B4_1_1_5897.d" \\\n&nbsp; &nbsp; &nbsp; --f "/stornext/HPCScratch/home/romano.h/ProteomicsLab/DATA/P4024/P4025_45min_B4_1_1_5911.d" \\\n&nbsp; &nbsp; &nbsp; --lib "/stornext/HPCScratch/home/romano.h/ProteomicsLab/DATA/P4024/library.tsv" \\\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --threads <span class="highlightColorAqua">21</span> --verbose 4 \\\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --out "output/outputreport.tsv" \\\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --qvalue 0.01 --matrices &nbsp;--out-lib "output/spectrallib.tsv" \\\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --gen-spec-lib --predictor \\\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --fasta "/stornext/HPCScratch/home/romano.h/ProteomicsLab/DATA/P4024/Human_Proteome_reviewed_May2021.fasta" \\\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --met-excision --cut "K*,R*" --mass-acc 10 --mass-acc-ms1 10.0 --use-quant --reanalyse \\\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --smart-profiling --peak-center --no-ifs-removal\n\n## CREATEDIANCMD will create a slurm job with updated list&nbsp;of file paths\n## And also, basic values for parameters are set automatically\n</pre>
<p>The highlighted parts in the script can be changed according to your dataset size.&nbsp;<br>So, for example,&nbsp;in a&nbsp;small dataset (smaller number of input files ~5-10 files), you can use less <span class="fontColorBlue"><em>--cpus-per-task</em></span> and less <span class="fontColorBlue"><em>--mem</em></span>. The number of threads is also important.</p>
<p>Then click on the <span class="fontColorBlue">Open in Terminal<strong><span class="fontColorBlue"> </span></strong><span class="fontColorNeutralDark">button</span></span> and run:</p><pre style="margin-left:40px;">$sbatch diann.slurm</pre><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="1" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="08611d93-c73f-441b-8f07-2b77b973efba" title=""></div></div><p>This will start a Slurm job that will run your DiaNN task. Depending on the state of the queue, your job might start running immediately or may get queued up until resources are available. Keep an eye on the <a href="http://dashboards.hpc.wehi.edu.au/d/s/slurm?orgId=1&amp;refresh=10s" data-cke-saved-href="http://dashboards.hpc.wehi.edu.au/d/s/slurm?orgId=1&amp;refresh=10s" target="_blank" data-interception="off" title="http://dashboards.hpc.wehi.edu.au/d/s/slurm?orgId=1&amp;refresh=10s">SLURM Dashboards</a>.</p>
<ol><li><span class="fontColorBlue">Make sure your folder contains all required files:&nbsp;fasta, input, and library.tsv files</span>​​​​​​​</li><li>&nbsp;<span class="fontColorBlue">You can modify the DiaNN&nbsp;command as you see fit but make sure to replace <strong>Unimod4</strong> with -<strong>-fixed-mod UniMod:4,57.021464,C , </strong>since<strong>&nbsp;Unimod4</strong>&nbsp;argument does not work on linux.&nbsp;</span></li></ol>
<h3><span class="fontColorBlue">Step 4: Monitor your job</span></h3><p>You can check the status of your jobs on the <strong><a href="http://dashboards.hpc.wehi.edu.au/d/jobdetails/user-queue-details" data-cke-saved-href="http://dashboards.hpc.wehi.edu.au/d/jobdetails/user-queue-details" target="_blank" data-interception="off" title="http://dashboards.hpc.wehi.edu.au/d/jobdetails/user-queue-details">Users Queue Details dashboard</a>. </strong>Select your username from the <em>Users</em> dropdown menu to see how many jobs you have running/pending and the number of resources you requested. To learn more about SLURM, please visit our <a href="/sites/rc2/SitePages/Batch-jobs.aspx" data-cke-saved-href="https://wehieduau.sharepoint.com/sites/rc2/SitePages/Batch-jobs.aspx" data-interception="on" title="https://wehieduau.sharepoint.com/sites/rc2/SitePages/Batch-jobs.aspx">batch jobs</a> page.</p><div tabindex="-1" data-cke-widget-wrapper="1" data-cke-filter="off" class="cke_widget_wrapper cke_widget_block cke_widget_inlineimage cke_widget_wrapper_webPartInRteInlineImage cke_widget_wrapper_webPartInRteAlignCenter cke_widget_wrapper_webPartInRte" data-cke-display-name="div" data-cke-widget-id="1" role="region" aria-label="Inline image in RTE. Use Alt + F11 to go to toolbar. Use Alt + P to open the property pane."><div data-webpart-id="image" class="webPartInRte webPartInRteAlignCenter webPartInRteInlineImage cke_widget_element" data-cke-widget-data="%7B%22classes%22%3A%7B%22webPartInRteInlineImage%22%3A1%2C%22webPartInRteAlignCenter%22%3A1%2C%22webPartInRte%22%3A1%7D%7D" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="inlineimage" data-instance-id="2865a103-b025-45a0-839b-806ed9e773db" title=""></div></div><p><br></p>
<h3><span class="fontColorBlue">Note</span></h3><p>Runnig Diann on linux experiences apparent random failure, which a rerun resolves most of the time. We have opened <a href="https://github.com/vdemichev/DiaNN/issues/327" data-cke-saved-href="https://github.com/vdemichev/DiaNN/issues/327" target="_blank" data-interception="off" title="https://github.com/vdemichev/DiaNN/issues/327">an issue </a>with the developers and waiting for a new release to fix this bug.</p><p>In the meantime, you can use the following submission script beside your diann.slurm. This script runs diann.slurm and if it fails it automatically rerun itself and resubmitting diann.slurm.</p><p>Save the following code in a text file called&nbsp;diann_wf.slurm</p><pre style="margin-left:40px;">#!/bin/bash\n  \n#SBATCH -p regular\n#SBATCH --job-name=DiaNN_lib\n#SBATCH --time=00:10:00\n#SBATCH --cpus-per-task=1\n#SBATCH --mem=10M\n\necho "Diann controller"\njid=$(dsbatch diann.slurm)\n\ndsbatch --dependency=afternotok:$jid diann_wf.slurm</pre><p>Run it&nbsp;</p><pre style="margin-left:40px;">sbatch diann_wf.slurm</pre>
