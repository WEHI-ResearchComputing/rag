<h2><span class="fontColorThemeSecondary">When do I need to tar and compress directories before moving to Stornext?</span></h2><p>Where possible, we recommend that folders with files smaller than a 100MB <strong>be tarred before moving</strong> to Stornext.</p><p>Where possible, we also recommend archiving compressed formats like CRAM instead of BAM to Stornext.&nbsp;</p><p aria-hidden="true">&nbsp;</p><h2><span class="fontColorThemeSecondary">How do I transfer my results to stornext to be archived?</span></h2><p>If feasible, at the end of your pipeline, tar and compress your results and any files essential for reproducibility. If not just do the next step. Next step is moving using cp or rsync to your Stornext lab share. For example, the datamover partition can be used with:</p><pre># cp (copy)<br>sbatch -p datamover --wrap "cp &lt;file1&gt; &lt;file2&gt; ... /stornext/&lt;destination&gt;"<br><br># rsync<br>sbatch -p datamover --wrap "rsync -a &lt;file1&gt; &lt;file2&gt; ... /stornext/&lt;destination&gt;"</pre><p>The transfer can be done through any of the following:</p><ol><li>A Slurm job that uses the datamover partition</li><li>From the command line on slurm-login or vc7-shared login nodes</li><li>Using the Open Ondemand file manager, but this will not work for very large files.</li></ol><p aria-hidden="true">&nbsp;</p><p>After the files has been backed up, you can truncate them to free up space in your project/lab space.</p><p aria-hidden="true">&nbsp;</p><h2><span class="fontColorThemeSecondary">Where do I store my code?</span></h2><p>Code should be managed using git and committed to GitHub or similar repositories (e.g., GitLab and BitBucket). <strong>Git allows you to work simultaneously with your colleagues; and facilitates version control, traceability, and rollback capabilities</strong>. Additionally, Git and remote repositories (e.g. GitHub) are extremely useful for demonstrating provenance and ownership.</p><p aria-hidden="true">&nbsp;</p><p>If you need to backup code to tape (e.g. for reproducibility), then it should be done by tarring and compressing before moving using cp or rsync to your Stornext lab share.&nbsp;</p><p aria-hidden="true">&nbsp;</p><p>VAST should be used to store code that is actively being developed, and should be regularly committed to a remote git repository.</p><p aria-hidden="true">&nbsp;</p><p>VSCode, Rstudio, and Posit Workbench <a href="https://docs.posit.co/ide/user/ide/guide/tools/version-control.html">include Git integrations</a> to make your workflow with git seamless.</p><p aria-hidden="true">&nbsp;</p><p>Training on how to use git is available on <a href="/sites/rc2/SitePages/RCP-Training.aspx" data-interception="off" target="_blank" rel="noopener noreferrer">our RCP training page</a>. If you need more training please reach out to <a href="mailto:research.computing@wehi.edu.au" data-interception="off" target="_blank" rel="noopener noreferrer">research.computing@wehi.edu.au</a></p><p aria-hidden="true">&nbsp;</p><h2><span class="fontColorThemeSecondary">How will Nextflow pipelines be affected?</span></h2><p>Nextflow processes can read from Stornext but not write any results there. But, the master Nextflow process can write to Stornext using the publishDir directive. Set your publishDir to VAST Scratch/Projects.</p><pre>nextflow run ... -process.publishDir /stornext/...</pre><p>Or, if your pipeline has an “outputDir” (or similar) parameter, the following should also work.</p><pre>nextflow run ... --outputDir /stornext/…</pre><p>To move results to Stornext, you can do either of the following:</p><ol><li>Add an extra step to your pipeline that collects all results files in one folder, tar/compress it then move it to your Stornext lab share. Truncate these files as soon as possible.</li><li>After the successful completion of the pipeline, collect all results into one folder, &nbsp;tar/compress, then move to Stornext using Open Ondemand File manager (small files) or rsync command.</li></ol><p aria-hidden="true">&nbsp;</p><p>Note that by default, Seqera Platform submits master processes to the “regular” partition. If you need to archive files from a Seqera Platform pipeline, please send an email to <a href="mailto:support@wehi.edu.au">support@wehi.edu.au</a>.</p><p aria-hidden="true">&nbsp;</p><h2><span class="fontColorThemeSecondary">Is there somewhere where I can test the changes?</span></h2><p>A temporary node, “vr9-test”, can be used to test small pipelines and workflows. You can ssh to this node with “ssh vr9-test”. The node has similar resource limits to vc7-shared (i.e., 4 CPUs and 24GB memory) and has /stornext directories as read-only. Note that this node doesn't have access to Slurm.</p>
<h2><span class="fontColorThemeSecondary">How to use Stornext from different services?</span></h2>
<h2><span class="fontColorThemeSecondary">Motivation Behind the Stornext Read-Only Transition</span></h2><p style="margin-left:0px;">The upcoming transition of Stornext to a read-only configuration from all compute nodes is driven by a need to enhance system reliability and efficiency at WEHI. <strong>Stornext has historically been used as active space, but should instead be thought of as an archival area.</strong></p><p style="margin-left:0px;" aria-hidden="true">&nbsp;</p><p style="margin-left:0px;">Here’s why this change is important:</p><p style="margin-left:0px;" aria-hidden="true">&nbsp;</p><ol><li><p style="margin-left:0px;"><strong>Improved Stability</strong>: Stornext is susceptible to failovers due to high-frequency unbuffered writes. By limiting Stornext to read-only, we greatly decrease the chances of system failures that disrupt WEHI operations.</p><p style="margin-left:0px;">&nbsp;</p></li><li><p style="margin-left:0px;"><strong>Enhanced Performance</strong>: Stornext write performance is highly variable. Restricting write access to Stornext from compute nodes will improve write speeds for your Slurm jobs, leading to faster execution of computational tasks.</p><p style="margin-left:0px;">&nbsp;</p></li><li><p style="margin-left:0px;"><strong>Cost and Resource Efficiency</strong>: <u>Stornext backs up almost all files nightly, and backups are stored indefinitely</u>, requiring significant financial and physical resources for tape drive maintenance and storage. The read-only policy will reduce the backup of unnecessary files, thereby lowering operational costs.</p></li></ol><p aria-hidden="true">&nbsp;</p>

<h3><span class="fontColorThemeSecondary">Operational Details:</span></h3><ul><li><p><strong>Affected Areas</strong>: All paths within the /stornext directory will be read-only from compute nodes across all non-datamover partitions (regular, bigmem, long, interactive, gpuq, gpuq_interactive).</p><p>&nbsp;</p></li><li><p><strong>Exclusions</strong>:&nbsp;</p><ul><li>Login nodes (slurm-login and vc7-shared).&nbsp;</li><li>Home directories.&nbsp;</li><li>NAS.</li><li>Open OnDemand File Manager.</li></ul><p>&nbsp;</p></li></ul><p><strong>The VAST filesystem will continue to be available for file writing and saving from all compute and login nodes.</strong></p><p aria-hidden="true">&nbsp;</p><p>Additionally, you can use the <span class="fontColorGreen"><strong>datamover </strong></span>partition to write to Stornext. The datamover partition can be used by adding a separate job/process/task in your workflow/pipeline that moves files required for archiving into Stornext.</p><p aria-hidden="true">&nbsp;</p><p>For non-CLI users, an OnDemand App will be provided to create and copy a tar-ed and compressed copy of folders from VAST to Stornext.</p>
